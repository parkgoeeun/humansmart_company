function useCoupon(e,o,n){var t="",c="";t="FIRST"==o?"첫 결제자":"PAYMENT"==o?"재 구매자":"REVIEW"==o?"리뷰 작성":"cop"==o?"제휴 기관 쿠폰":"트로스트 쿠폰","A@10"==e?c="텍스트 테라피 전 상품 10% 할인 쿠폰을 사용하시겠습니까?":"2@30"==e?c="텍스트 테라피 1일 상품 30% 할인 쿠폰을 사용하시겠습니까?":"free24"==e?c="무료상담 30분 이용권 쿠폰을 사용하시겠습니까?":"free48@100"==e?c="무료상담 1일 이용권 쿠폰을 사용하시겠습니까?":"free168"==e&&(c="무료상담 7일 이용권 쿠폰을 사용하시겠습니까?");var r=confirm(t+" - "+c);r&&(location.href=n)}function initialization(){$(".checkCoupon").css("display","none")}function moveToPayment(e){var o=confirm(e+"\n\n결제하기로 이동하시겠습니까?");o&&(location.href="/service/counseling/")}$.ajax({url:"/oauth/counseling/texttime/ExtraModule/",type:"POST",cache:!1,timeout:3e4,contentType:"application/json; charset=UTF-8",dataType:"json",data:JSON.stringify({ExtraModule:"coupon",id:clientID,type:"getCoupon"}),success:function(e){$("#couponCountText").html(e.result.length),$.each(e.result,function(e,o){var n=String(o.counselingMode);-1!==n.indexOf("texttime")?"Payment"===o.type?(""!==partnerID&&""!==paymentItem?-1!==o.discountPrices.texttime.target.indexOf(paymentItem[1])?onButton="<button class='couponSubmit True' onclick='useCoupon(\""+o.item+'", "'+o.couponItem+'", "/service/payment/?partner='+partnerID+"&payment=item"+paymentItem[1]+"&coupon="+o.item+"&referer="+o.referer+"\")'>쿠폰 사용</button>":onButton="<button class='couponSubmit False' onclick='alert(\"선택하신 쿠폰은 해당 이용권에 사용 불가능합니다.\");return false;'>쿠폰 사용</button>":onButton="<button class='couponSubmit True' onclick='useCoupon(\""+o.item+'", "'+o.couponItem+'", "/service/counseling/?partner='+partnerID+"&payment="+paymentItem+"&coupon="+o.item+"&referer="+o.referer+"\")'>쿠폰 사용</button>",$("#couponList").append("<div class='couponPayment'><div class='couponTitle'><pre>"+o.refererTitle+"</pre><p class='couponItem'>"+o.couponItem+"</p>"+onButton+"</div><div class='couponContent'><p class='couponContent_p'>"+o.refererContent+"</p><b class='couponContent_b'>"+o.finishDate+"</b><hr class='couponContent_hr'/><p class='couponContent_p_'>"+o.refererContent_+"</p></div></div>")):"ExtraService"===o.type&&("SentenceComplete"===o.item?onButton="<button class='couponSubmit False' onclick='alert(\"문장완성검사는 트로스트 앱에서만 이용이 가능합니다. 스마트폰 앱스토어에서 트로스트를 검색하여 설치해주세요.\")'>쿠폰 사용</button>":"Y"===o.counselingState?onButton="<button class='couponSubmit False' onclick='alert(\"해당 쿠폰은 접수 상담 중에만 사용 가능합니다.\");return false;'>쿠폰 사용</button>":"free24"===o.item?""!==partnerID&&""!==paymentItem?onButton="<button class='couponSubmit False' onclick='alert(\"해당 쿠폰은 상담 페이지의 쿠폰함에서만 사용할 수 있습니다.\");return false;'>쿠폰 사용</button>":onButton="<button class='couponSubmit True' onclick='useCoupon(\""+o.item+'", "'+o.couponItem+'", "/service/counseling/?partner='+partnerID+"&payment="+paymentItem+"&coupon="+o.item+"&referer="+o.referer+"\")'>쿠폰 사용</button>":"free48@100"===o.item||"free48"===o.item?""!==partnerID&&""!==paymentItem?onButton="<button class='couponSubmit False' onclick='alert(\"해당 쿠폰은 상담 페이지의 쿠폰함에서만 사용할 수 있습니다.\");return false;'>쿠폰 사용</button>":onButton="<button class='couponSubmit True' onclick='useCoupon(\""+o.item+'", "'+o.couponItem+'", "/service/counseling/?partner='+partnerID+"&payment="+paymentItem+"&coupon="+o.item+"&referer="+o.referer+"\")'>쿠폰 사용</button>":"free168"===o.item&&(""!==partnerID&&""!==paymentItem?onButton="<button class='couponSubmit False' onclick='alert(\"해당 쿠폰은 상담 페이지의 쿠폰함에서만 사용할 수 있습니다.\");return false;'>쿠폰 사용</button>":onButton="<button class='couponSubmit True' onclick='useCoupon(\""+o.item+'", "'+o.couponItem+'", "/service/counseling/?partner='+partnerID+"&payment="+paymentItem+"&coupon="+o.item+"&referer="+o.referer+"\")'>쿠폰 사용</button>"),$("#couponList").append("<div class='couponExtraService'><div class='couponTitle'><pre>"+o.refererTitle+"</pre><p class='couponItem'>"+o.couponItem+"</p>"+onButton+"</div><div class='couponContent'><p class='couponContent_p'>"+o.refererContent+"</p><b class='couponContent_b'>"+o.finishDate+"</b><hr class='couponContent_hr'/><p class='couponContent_p_'>"+o.refererContent_+"</p></div></div>")):"Payment"===o.type?$("#couponList").append("<div class='couponPayment'><div class='couponTitle'><pre>"+o.refererTitle+"</pre><p class='couponItem'>"+o.couponItem+"</p><button class='couponSubmit False' onclick='alert(\"해당 쿠폰은 트로스트 앱에서만 사용이 가능합니다. 스마트폰 앱스토어에서 트로스트를 검색하여 설치해주세요.\")'>쿠폰 사용</button></div><div class='couponContent'><p class='couponContent_p'>"+o.refererContent+"</p><b class='couponContent_b'>"+o.finishDate+"</b><hr class='couponContent_hr'/><p class='couponContent_p_'>"+o.refererContent_+"</p></div></div>"):"ExtraService"===o.type&&$("#couponList").append("<div class='couponExtraService'><div class='couponTitle'><pre>"+o.refererTitle+"</pre><p class='couponItem'>"+o.couponItem+"</p><button class='couponSubmit False' onclick='alert(\"해당 쿠폰은 트로스트 앱에서만 사용이 가능합니다. 스마트폰 앱스토어에서 트로스트를 검색하여 설치해주세요.\")'>쿠폰 사용</button></div><div class='couponContent'><p class='couponContent_p'>"+o.refererContent+"</p><b class='couponContent_b'>"+o.finishDate+"</b><hr class='couponContent_hr'/><p class='couponContent_p_'>"+o.refererContent_+"</p></div></div>")})}}),$(".menuCouponPayment").click(function(){$(".couponPayment").css("display","block"),$(".couponExtraService").css("display","none"),$(".menuCouponPayment").css({"border-bottom":"3px solid #FFA321",color:"#FFA321"}),$(".menuCouponExtraService").css({"border-bottom":"3px solid #999999",color:"#999999"})}),$(".menuCouponExtraService").click(function(){$(".couponPayment").css("display","none"),$(".couponExtraService").css("display","block"),$(".menuCouponExtraService").css({"border-bottom":"3px solid #FFA321",color:"#FFA321"}),$(".menuCouponPayment").css({"border-bottom":"3px solid #999999",color:"#999999"})}),$("#guideImoji").click(function(){$("#guideImojiImg").css("display",""),$("#guideClose").css("display","")}),$("#guideClose").click(function(){$("#guideImojiImg").css("display","none"),$("#guideClose").css("display","none")});
